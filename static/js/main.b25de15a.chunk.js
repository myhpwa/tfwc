(this.webpackJsonptfwc=this.webpackJsonptfwc||[]).push([[1],{124:function(t){t.exports=JSON.parse('{"name":"tfwc","homepage":"/tfwc","productName":"\u514d\u8cbbWiFi\u8207\u5145\u96fb","pwaVersion":"2.3.2","version":"2.0.0","license":"MIT","keywords":["\u514d\u8cbb\u5145\u96fb","\u514d\u8cbb WiFi","\u53f0\u7063"],"description":"\u5b9a\u4f4d\u53f0\u7063\u7684\u514d\u8cbb\u5145\u96fb\u7ad9\u6216 WiFi \u71b1\u9ede","repository":"https://github.com/MrMYHuang/tfwc","author":{"name":"Meng-Yuan Huang","email":"myh@live.com"},"private":false,"files":["README.md"],"main":"buildElectron/main.js","scripts":{"postinstall":"electron-builder install-app-deps","start":"react-app-rewired start","build":"react-app-rewired build && powershell -file CopyBuild.ps1","build_linux":"react-app-rewired build && ./CopyBuild.sh","test":"react-app-rewired test","eject":"react-scripts eject","build-electron":"tsc -b tsconfigElectron.json","build-electron-store":"tsc -b tsconfigElectron.json && mv buildElectron/mainStore.js buildElectron/main.js","start-electron":"npm run build-electron && electron .","dist-snap":"npm run build-electron-store && rm -f dist/*.snap && electron-builder -l snap -c electronBuilderConfigs/snap.json","publish-snap":"snapcraft upload --release=stable dist/*.snap","icons-mas":"cd buildElectron && iconutil -c icns icon.iconset","dist-mas":"npm run build-electron-store && electron-builder -m mas -c electronBuilderConfigs/mas.json","dist-mas-dev":"npm run build-electron-store && electron-builder -m mas-dev -c electronBuilderConfigs/masDev.json"},"dependencies":{"electron-window-state":"^5.0.3"},"devDependencies":{"@ionic/react":"^5.6.12","@ionic/react-router":"^5.6.12","@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/adm-zip":"^0.4.34","@types/jest":"^26.0.24","@types/node":"^12.20.16","@types/qrcode":"^1.4.1","@types/react":"^16.14.11","@types/react-dom":"^16.9.14","@types/react-redux":"^7.1.18","@types/react-router":"^5.1.16","@types/react-router-dom":"^5.1.8","adm-zip":"^0.5.5","axios":"^0.21.1","csv-parse":"^4.16.0","customize-cra":"^1.0.0","electron":"^11.4.10","electron-builder":"^22.11.7","electron-builder-notarize-pkg":"^1.2.0","history":"^4.10.1","ionicons":"^5.5.2","memfs":"^3.2.0","node-downloader-helper":"^1.0.18","qrcode":"^1.4.4","query-string":"^6.14.1","react":"^17.0.2","react-app-rewired":"^2.1.7","react-dom":"^17.0.2","react-redux":"^7.2.4","react-router":"^5.2.0","react-router-dom":"^5.2.0","react-scripts":"^4.0.3","react-test-renderer":"16.2.0","redux":"^4.1.0","typescript":"^4.3.5","workbox-background-sync":"^5.1.3","workbox-broadcast-update":"^5.1.3","workbox-cacheable-response":"^5.1.3","workbox-core":"^5.1.3","workbox-expiration":"^5.1.3","workbox-google-analytics":"^5.1.3","workbox-navigation-preload":"^5.1.3","workbox-precaching":"^5.1.3","workbox-range-requests":"^5.1.3","workbox-routing":"^5.1.3","workbox-strategies":"^5.1.3","workbox-streams":"^5.1.3"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},224:function(t,e,n){"use strict";(function(t){var r=n(3),s=n.n(r),a=n(7),o=n(8),i=n(11),c=n(14),u=n(15),l=n(0),p=n.n(l),d=n(2),h=n(38),f=n(225),j=n.n(f),b=n(5),g=n(20),m=(n(427),n(124)),v=n(1),w=function(e){Object(c.a)(r,e);var n=Object(u.a)(r);function r(t){var e;return Object(o.a)(this,r),(e=n.call(this,t)).reportText="",e.state={showBugReportAlert:!1,showFontLicense:!1,dataDownloadRatio:0,showUpdateDataDone:!1,showClearAlert:!1,showToast:!1,toastMessage:""},e}return Object(i.a)(r,[{key:"ionViewWillEnter",value:function(){}},{key:"updateData",value:function(){var t=Object(a.a)(s.a.mark((function t(){var e,n,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({dataDownloadRatio:0}),e=s.a.mark((function t(e){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.a.freeResources[e],t.next=3,b.a.downloadCsvZipData(n.url,(function(t){r.setState({dataDownloadRatio:(e+t/100)/b.a.freeResources.length})}));case 3:a=t.sent,b.a.saveFileToIndexedDB(n.dataKey,a);case 5:case"end":return t.stop()}}),t)})),n=0;case 3:if(!(n<b.a.freeResources.length)){t.next=8;break}return t.delegateYield(e(n),"t0",5);case 5:n++,t.next=3;break;case 8:this.setState({dataDownloadRatio:1,showUpdateDataDone:!0});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)(d.n,{children:[Object(v.jsx)(d.e,{children:Object(v.jsx)(d.A,{children:Object(v.jsx)(d.x,{className:"uiFont",children:"\u8a2d\u5b9a"})})}),Object(v.jsxs)(d.d,{children:[Object(v.jsxs)(d.k,{children:[Object(v.jsxs)(d.i,{children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.c,slot:"start"}),Object(v.jsx)(d.j,{className:"ion-text-wrap uiFont",children:Object(v.jsx)("a",{href:"https://github.com/MrMYHuang/tfwc#report",target:"_new",children:"\u555f\u7528 app \u7570\u5e38\u8a18\u9304"})}),Object(v.jsx)(d.z,{slot:"end",checked:this.props.hasAppLog,onIonChange:function(t){var n=t.detail.checked;e.props.hasAppLog!==n&&(n?b.a.enableAppLog():b.a.disableAppLog(),e.props.dispatch({type:"SET_KEY_VAL",key:"hasAppLog",val:n}))}})]}),Object(v.jsxs)(d.i,{hidden:!this.props.settings.hasAppLog,children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.c,slot:"start"}),Object(v.jsx)(d.j,{className:"ion-text-wrap uiFont",children:"\u56de\u5831 app \u7570\u5e38\u8a18\u9304"}),Object(v.jsx)(d.c,{fill:"outline",shape:"round",slot:"end",size:"large",className:"uiFont",onClick:function(t){e.reportText="\u700f\u89bd\u5668\uff1a"+navigator.userAgent+"\n\nApp\u7248\u672c\uff1a"+m.pwaVersion+"\n\nApp\u8a2d\u5b9a\uff1a"+JSON.stringify(e.props.settings)+"\n\nLog\uff1a\n"+b.a.getLog(),e.setState({showBugReportAlert:!0})},children:"\u56de\u5831"}),Object(v.jsx)(d.a,{cssClass:"uiFont",backdropDismiss:!1,isOpen:this.state.showBugReportAlert,header:"\u7570\u5e38\u56de\u5831",subHeader:"\u8f38\u5165\u60a8\u7684 E-mail\uff0c\u4ee5\u5f8c\u7e8c\u806f\u7d61",inputs:[{name:"name0",type:"email",placeholder:"\u4f8b\uff1aabc@example.com"},{name:"name1",type:"textarea",placeholder:"\u8acb\u63cf\u8ff0\u767c\u751f\u6b65\u9a5f"}],buttons:[{text:"\u9001\u51fa",cssClass:"primary uiFont",handler:function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(n.name0)){t.next=3;break}return e.setState({showBugReportAlert:!1,showToast:!0,toastMessage:"\u932f\u8aa4\uff0cE-mail \u4e0d\u7b26\u683c\u5f0f\uff01"}),t.abrupt("return");case 3:return t.prev=3,r=j.a.create({timeout:1e4}),t.next=7,r.post(b.a.bugReportApiUrl,{subject:"".concat(m.productName,"\u7570\u5e38\u8a18\u9304\u56de\u5831"),text:"E-mail: ".concat(n.name0,"\n\n\u767c\u751f\u6b65\u9a5f: ").concat(n.name1,"\n\n").concat(e.reportText)});case 7:e.setState({showBugReportAlert:!1,showToast:!0,toastMessage:"\u7570\u5e38\u56de\u5831\u6210\u529f"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0),e.setState({showBugReportAlert:!1,showToast:!0,toastMessage:"\u7570\u5e38\u56de\u5831\u5931\u6557"});case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary uiFont",handler:function(){return e.setState({showBugReportAlert:!1})}}]})]}),Object(v.jsxs)(d.i,{children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.k,slot:"start"}),Object(v.jsx)("div",{className:"contentBlock",children:Object(v.jsxs)("div",{style:{flexDirection:"column"},children:[Object(v.jsx)(d.j,{className:"ion-text-wrap uiFont",children:"App \u8a2d\u5b9a"}),Object(v.jsxs)("div",{style:{textAlign:"right"},children:[Object(v.jsx)(d.c,{fill:"outline",shape:"round",size:"large",className:"uiFont",onClick:function(){var t=Object(a.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="data:text/json;charset=utf-8,".concat(encodeURIComponent(localStorage.getItem(b.a.storeFile)||"")),(r=document.createElement("a")).href=n,r.download=b.a.storeFile,r.click(),r.remove();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"\u532f\u51fa"}),Object(v.jsx)("input",{id:"importJsonInput",type:"file",accept:".json",style:{display:"none"},onChange:function(){var n=Object(a.a)(s.a.mark((function n(r){var a,o,i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null===(a=r.target.files)||void 0===a?void 0:a.item(0),n.next=3,null===o||void 0===o?void 0:o.text();case 3:if(n.t0=n.sent,n.t0){n.next=6;break}n.t0="";case 6:i=n.t0;try{JSON.parse(i),localStorage.setItem(b.a.storeFile,i),e.props.dispatch({type:"LOAD_SETTINGS"}),t((function(){e.updateData()}))}catch(s){console.error(s),console.error((new Error).stack)}document.getElementById("importJsonInput").value="";case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}),Object(v.jsx)(d.c,{fill:"outline",shape:"round",size:"large",className:"uiFont",onClick:function(t){document.querySelector("#importJsonInput").click()},children:"\u532f\u5165"}),Object(v.jsx)(d.c,{fill:"outline",shape:"round",size:"large",className:"uiFont",onClick:function(t){e.setState({showClearAlert:!0})},children:"\u91cd\u7f6e"}),Object(v.jsx)(d.a,{cssClass:"uiFont",isOpen:this.state.showClearAlert,backdropDismiss:!1,onDidPresent:function(t){},header:"\u91cd\u7f6e\u6703\u9084\u539fapp\u8a2d\u5b9a\u9810\u8a2d\u503c\u4e26\u6e05\u9664\u66f8\u7c64\u3001\u96e2\u7dda\u8cc7\u6599\u6a94\uff01\u78ba\u5b9a\u91cd\u7f6e\uff1f",buttons:[{text:"\u53d6\u6d88",cssClass:"primary uiFont",handler:function(t){e.setState({showClearAlert:!1})}},{text:"\u91cd\u7f6e",cssClass:"secondary uiFont",handler:function(){var t=Object(a.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.clearAppData();case 2:e.props.dispatch({type:"DEFAULT_SETTINGS"}),e.setState({showClearAlert:!1,showToast:!0,toastMessage:"\u6e05\u9664\u6210\u529f!"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]})]})]})})]}),Object(v.jsxs)(d.i,{children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.p,slot:"start"}),Object(v.jsxs)("div",{style:{width:"100%"},children:[Object(v.jsx)(d.j,{className:"ion-text-wrap uiFont",children:"\u66f4\u65b0\u96e2\u7dda\u8cc7\u6599"}),Object(v.jsx)(d.o,{value:this.state.dataDownloadRatio})]}),Object(v.jsx)(d.c,{fill:"outline",shape:"round",slot:"end",size:"large",className:"uiFont",onClick:function(){var t=Object(a.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.updateData());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"\u66f4\u65b0"}),Object(v.jsx)(d.y,{cssClass:"uiFont",isOpen:this.state.showUpdateDataDone,onDidDismiss:function(){return e.setState({showUpdateDataDone:!1})},message:"\u96e2\u7dda\u8cc7\u6599\u66f4\u65b0\u5b8c\u7562\uff01",duration:2e3})]}),Object(v.jsxs)(d.i,{children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.j,slot:"start"}),Object(v.jsx)(d.j,{className:"ion-text-wrap uiFont",children:b.a.appSettings.theme}),Object(v.jsxs)(d.s,{slot:"end",value:+this.props.theme,className:"uiFont",interface:"popover",interfaceOptions:{cssClass:"tfwcthemes"},onIonChange:function(t){var n=+t.detail.value;+e.props.theme!==n&&e.props.dispatch({type:"SET_KEY_VAL",key:"theme",val:n})},children:[Object(v.jsx)(d.t,{className:"uiFont cbeta",value:0,children:"\u7da0\u5e95"}),Object(v.jsx)(d.t,{className:"uiFont dark",value:1,children:"\u6697\u8272"}),Object(v.jsx)(d.t,{className:"uiFont light",value:2,children:"\u4eae\u8272"}),Object(v.jsx)(d.t,{className:"uiFont oldPaper",value:3,children:"\u820a\u66f8"}),Object(v.jsx)(d.t,{className:"uiFont marble",value:4,children:"\u5927\u7406\u77f3"})]})]}),Object(v.jsxs)(d.i,{children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.v,slot:"start"}),Object(v.jsx)("div",{className:"contentBlock",children:Object(v.jsxs)("div",{style:{flexDirection:"column"},children:[Object(v.jsxs)(d.j,{className:"ion-text-wrap uiFont",children:[b.a.appSettings.uiFontSize,": ",this.props.uiFontSize]}),Object(v.jsx)(d.p,{min:12,max:32,pin:!0,snaps:!0,value:this.props.uiFontSize,onIonChange:function(n){e.props.dispatch({type:"SET_KEY_VAL",key:"uiFontSize",val:+n.detail.value}),t((function(){b.a.updateCssVars(e.props.settings)}))}})]})})]}),Object(v.jsxs)(d.i,{children:[Object(v.jsx)("div",{tabIndex:0}),Object(v.jsx)(d.f,{icon:g.l,slot:"start"}),Object(v.jsxs)("div",{className:"uiFont",children:[Object(v.jsx)("div",{children:"\u95dc\u65bc"}),Object(v.jsx)("div",{children:"\u4f5c\u8005: Meng-Yuan Huang"}),Object(v.jsx)("div",{children:Object(v.jsx)("a",{href:"mailto:myh@live.com",target:"_new",children:"myh@live.com"})})]})]})]}),Object(v.jsx)(d.y,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return e.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})]})}}]),r}(p.a.Component),x=Object(d.L)(w);e.a=Object(h.b)((function(t){return{settings:t.settings,hasAppLog:t.settings.hasAppLog,theme:t.settings.theme,uiFontSize:t.settings.uiFontSize,speechRate:t.settings.speechRate,bookmarks:t.settings.bookmarks,voiceURI:t.settings.voiceURI,mainVersion:t.tmpSettings.mainVersion}}))(x)}).call(this,n(74).setImmediate)},234:function(t,e,n){var r={"./ion-action-sheet.entry.js":[451,5],"./ion-alert.entry.js":[452,6],"./ion-app_8.entry.js":[453,7],"./ion-avatar_3.entry.js":[454,17],"./ion-back-button.entry.js":[455,18],"./ion-backdrop.entry.js":[456,43],"./ion-button_2.entry.js":[457,19],"./ion-card_5.entry.js":[458,20],"./ion-checkbox.entry.js":[459,21],"./ion-chip.entry.js":[460,22],"./ion-col_3.entry.js":[461,44],"./ion-datetime_3.entry.js":[462,10],"./ion-fab_3.entry.js":[463,23],"./ion-img.entry.js":[464,45],"./ion-infinite-scroll_2.entry.js":[465,46],"./ion-input.entry.js":[466,24],"./ion-item-option_3.entry.js":[467,25],"./ion-item_8.entry.js":[468,26],"./ion-loading.entry.js":[469,27],"./ion-menu_3.entry.js":[470,28],"./ion-modal.entry.js":[471,8],"./ion-nav_2.entry.js":[472,14],"./ion-popover.entry.js":[473,9],"./ion-progress-bar.entry.js":[474,29],"./ion-radio_2.entry.js":[475,30],"./ion-range.entry.js":[476,31],"./ion-refresher_2.entry.js":[477,11],"./ion-reorder_2.entry.js":[478,16],"./ion-ripple-effect.entry.js":[479,47],"./ion-route_4.entry.js":[480,32],"./ion-searchbar.entry.js":[481,33],"./ion-segment_2.entry.js":[482,34],"./ion-select_3.entry.js":[483,35],"./ion-slide_2.entry.js":[484,48],"./ion-spinner.entry.js":[485,13],"./ion-split-pane.entry.js":[486,49],"./ion-tab-bar_2.entry.js":[487,36],"./ion-tab_2.entry.js":[488,15],"./ion-text.entry.js":[489,37],"./ion-textarea.entry.js":[490,38],"./ion-toast.entry.js":[491,39],"./ion-toggle.entry.js":[492,12],"./ion-virtual-scroll.entry.js":[493,50]};function s(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],s=e[0];return n.e(e[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(r)},s.id=234,t.exports=s},236:function(t,e,n){var r={"./ion-icon.entry.js":[494,57]};function s(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],s=e[0];return n.e(e[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(r)},s.id=236,t.exports=s},260:function(t,e){},262:function(t,e){},296:function(t,e){},298:function(t,e){},326:function(t,e){},328:function(t,e){},329:function(t,e){},334:function(t,e){},336:function(t,e){},342:function(t,e){},344:function(t,e){},363:function(t,e){},375:function(t,e){},378:function(t,e){},409:function(t,e,n){},427:function(t,e,n){},428:function(t,e,n){},449:function(t,e,n){"use strict";n.r(e);var r=n(0),s=n.n(r),a=n(42),o=n.n(a),i=n(85),c=n(3),u=n.n(c),l=n(7),p=n(34),d=n(8),h=n(11),f=n(14),j=n(15),b=n(17),g=n(2),m=n(219),v=n(38),w=n(220),x=n.n(w),O=n(71),y=n(5),k=function t(){Object(d.a)(this,t),this.version=1,this.hasAppLog=!0,this.theme=2,this.uiFontSize=24,this.isInitialized=!1};function S(t){for(;document.body.classList.length>0;)document.body.classList.remove(document.body.classList.item(0));document.body.classList.toggle("theme".concat(t.theme),!0),y.a.updateCssVars(t)}var A=function t(){Object(d.a)(this,t),this.fetchError=!1,this.isLoadingData=!1,this.freeChargingItems=[],this.freeWifiItems=[],this.currPosition=void 0,this.shareTextModal={text:"",show:!1}};var C=Object(O.a)({settings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k,e=arguments.length>1?arguments[1]:void 0,n=Object(p.a)({},t);switch(e.type){case"LOAD_SETTINGS":S(n=JSON.parse(localStorage.getItem(y.a.storeFile)).settings);break;case"SET_KEY_VAL":var r=e.key,s=e.val;switch(r){case"theme":document.body.classList.forEach((function(t){/theme/.test(t)&&document.body.classList.remove(t)})),document.body.classList.toggle("theme".concat(s),!0)}n[r]=s,localStorage.setItem(y.a.storeFile,JSON.stringify({settings:n}));break;case"DEFAULT_SETTINGS":S(n=new k);break;default:0===Object.keys(n).length&&(n=new k);var a=new k;Object.keys(a).forEach((function(t){void 0===n[t]&&(n[t]=a[t])}))}return n},tmpSettings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new A,e=arguments.length>1?arguments[1]:void 0,n=Object(p.a)({},t),r=e.key,s=e.val;switch(n[r]=s,e.type){case"TMP_SET_KEY_VAL":return n}return t}});var D=n(20),E=(n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(224)),T=n(70),_=(n(428),n(1)),F=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).data=void 0,r.mode=void 0,r.page=0,r.rows=20,r.selectedMapUrl="",r.state={dataParts:[],popover:{show:!1,event:null},isScrollOn:!1,fetchError:!1,showConfrimOpenMapAlert:!1,showToast:!1,toastMessage:""},r.data=[],r.mode=r.props.match.params.tab,r}return Object(h.a)(n,[{key:"ionViewWillEnter",value:function(){this.fetchData(!0)}},{key:"fetchData",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e,n,r=this,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]&&s[0],t.next=3,new Promise((function(t,e){var n=setInterval((function(){r.props.isLoadingData||(clearInterval(n),t())}),50)}));case 3:return e&&("wifi"!==this.mode?this.data=this.props.tmpSettings.freeChargingItems:this.data=this.props.tmpSettings.freeWifiItems,this.page=0),n=this.data.slice(this.page*this.rows,(this.page+1)*this.rows),this.page+=1,this.setState({fetchError:!1,dataParts:e?n:[].concat(Object(T.a)(this.state.dataParts),Object(T.a)(n)),isScrollOn:this.state.dataParts.length<this.data.length}),t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getRows",value:function(){var t,e=this,n=null===(t=this.props.tmpSettings.currPosition)||void 0===t?void 0:t.coords,r=Array();return this.state.dataParts.forEach((function(t,s){var a="";a=null!=n?"https://www.google.com/maps/dir/?api=1&origin=".concat(n.latitude,",").concat(n.longitude,"&destination=").concat(t.\u7def\u5ea6,",").concat(t.\u7d93\u5ea6):"https://www.google.com/maps/search/?api=1&query=".concat(t.\u7def\u5ea6,",").concat(t.\u7d93\u5ea6),r.push(Object(_.jsxs)(g.i,{button:!0,onClick:function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectedMapUrl=a,e.setState({showConfrimOpenMapAlert:!0});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(_.jsx)("div",{tabIndex:0}),Object(_.jsxs)("div",{className:"listItem",children:[Object(_.jsx)("div",{children:Object(_.jsx)(g.j,{className:"ion-text-wrap uiFont",children:"wifi"!==e.mode?t.\u5145\u96fb\u7ad9\u540d\u7a31:t.\u71b1\u9ede\u540d\u7a31},"bookmarkItemLabel_"+s)}),Object(_.jsx)("div",{children:Object(_.jsx)(g.j,{className:"ion-text-wrap uiFontX0_7",children:t.\u5730\u5740})})]})]},"dictItem"+s))})),r}},{key:"getCurrentPositionAndSortData",value:function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.props.dispatch({type:"TMP_SET_KEY_VAL",key:"isLoadingData",val:!0}),t.next=3,y.a.getCurrentPositionAndSortData(this.props.dispatch,this.props.tmpSettings.freeChargingItems,this.props.tmpSettings.freeWifiItems);case 3:this.props.dispatch({type:"TMP_SET_KEY_VAL",key:"isLoadingData",val:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(_.jsxs)(g.n,{children:[Object(_.jsx)(g.e,{children:Object(_.jsxs)(g.A,{children:[Object(_.jsxs)(g.x,{className:"uiFont",children:["\u514d\u8cbb","wifi"!==this.mode?"\u5145\u96fb":" WiFi"]}),Object(_.jsx)(g.c,{fill:"clear",slot:"end",onClick:function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentPositionAndSortData();case 2:t.fetchData(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(_.jsx)(g.f,{icon:D.m,slot:"icon-only"})})]})}),Object(_.jsxs)(g.d,{children:[this.props.settings.isInitialized?this.props.isLoadingData?Object(_.jsx)(g.l,{cssClass:"uiFont",isOpen:this.props.isLoadingData,message:"\u8f09\u5165\u4e2d..."}):Object(_.jsxs)(g.k,{children:[this.getRows(),Object(_.jsx)(g.g,{threshold:"100px",disabled:!this.state.isScrollOn,onIonInfinite:function(e){t.fetchData(),e.target.complete()},children:Object(_.jsx)(g.h,{loadingText:"\u8f09\u5165\u4e2d..."})})]}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)(g.a,{cssClass:"uiFont",isOpen:this.state.showConfrimOpenMapAlert,backdropDismiss:!1,header:"\u78ba\u5b9a\u958b\u555f\u5730\u5716\uff1f",buttons:[{text:"\u95dc\u9589",cssClass:"secondary uiFont",handler:function(e){t.setState({showConfrimOpenMapAlert:!1})}},{text:"\u78ba\u5b9a",cssClass:"primary uiFont",handler:function(e){t.setState({showConfrimOpenMapAlert:!1}),window.open(t.selectedMapUrl)}}]}),Object(_.jsx)(g.y,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return t.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})]})}}]),n}(s.a.Component),L=Object(g.L)(F),I=Object(v.b)((function(t){return{isLoadingData:t.tmpSettings.isLoadingData,tmpSettings:t.tmpSettings,settings:t.settings}}))(L),N=n(226),M=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).state={isAppSettingsExport:Array(Object.keys(y.a.appSettings).length)},r}return Object(h.a)(n,[{key:"updateQrCode",value:function(){var t=this,e=Object.keys(y.a.appSettings).filter((function(e,n){return t.state.isAppSettingsExport[n]})).map((function(e,n){return{key:e,val:t.props.settings[e]}})).map((function(t){return"".concat(t.key,"=").concat(+t.val)})).join(",");e=""!==e?"settings=".concat(e):null;var n=this.props.text,r=/\?/.test(n);e&&(n+=r?"&".concat(e):"?".concat(e)),y.a.copyToClipboard(n);var s=document.getElementById("qrcCanvas");return N.toCanvas(s,n),s}},{key:"render",value:function(){var t=this;return Object(_.jsx)(g.m,{isOpen:this.props.showModal,cssClass:"uiFont",swipeToClose:!0,onWillPresent:function(){for(var e=[],n=0;n<t.state.isAppSettingsExport.length;n++)e.push(!1);t.setState({isAppSettingsExport:e},(function(){t.updateQrCode()}))},onDidDismiss:function(){return t.props.finish()},children:Object(_.jsx)(g.d,{children:Object(_.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center"},children:[Object(_.jsx)("div",{children:Object(_.jsx)(g.j,{className:"uiFont",children:"\u6b64\u9801app\u9023\u7d50\u5df2\u8907\u88fd\u81f3\u526a\u8cbc\u7c3f\uff01"})}),Object(_.jsx)("div",{children:Object(_.jsx)(g.j,{className:"uiFont",children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528QR Code\u5206\u4eab:"})}),Object(_.jsx)("div",{style:{flexGrow:1,flexShrink:0,display:"flex",alignItems:"center",margin:10},children:Object(_.jsx)("canvas",{id:"qrcCanvas",width:"500",height:"500",style:{margin:"0px auto"}})}),Object(_.jsxs)("div",{children:[Object(_.jsx)(g.j,{className:"uiFont",children:"\u5305\u62ecapp\u8a2d\u5b9a:"}),Object(_.jsx)(g.k,{children:Object.keys(y.a.appSettings).map((function(e,n){return Object(_.jsxs)(g.i,{children:[Object(_.jsx)(g.j,{className:"ion-text-wrap uiFont",children:y.a.appSettings[e]}),Object(_.jsx)(g.z,{slot:"end",onIonChange:function(e){var r=t.state.isAppSettingsExport;r[n]=e.detail.checked,t.setState({isAppSettingsExport:r},(function(){t.updateQrCode()}))}})]},"appSettingExportItem_".concat(n))}))})]}),Object(_.jsx)("div",{children:Object(_.jsx)(g.c,{fill:"outline",shape:"round",size:"large",onClick:function(){return t.props.finish()},children:"\u95dc\u9589"})})]})})})}}]),n}(s.a.Component),P=Object(v.b)((function(t){return{settings:t.settings}}))(M),U=function t(e){Object(d.a)(this,t),this.\u4e3b\u7ba1\u6a5f\u95dc="",this.\u5730\u5340="",this.\u5145\u96fb\u7ad9\u540d\u7a31="",this.\u5730\u5740="",this.\u7def\u5ea6=0,this.\u7d93\u5ea6=0,this.\u4e3b\u7ba1\u6a5f\u95dc=e.\u4e3b\u7ba1\u6a5f\u95dc,this.\u5730\u5340=e.\u5730\u5340,this.\u5145\u96fb\u7ad9\u540d\u7a31=e.\u5145\u96fb\u7ad9\u540d\u7a31,this.\u5730\u5740=e.\u5730\u5740,this.\u7def\u5ea6=+e.\u7def\u5ea6,this.\u7d93\u5ea6=+e.\u7d93\u5ea6},R=function t(e){Object(d.a)(this,t),this.\u4e3b\u7ba1\u6a5f\u95dc="",this.\u5730\u5340="",this.\u71b1\u9ede\u540d\u7a31="",this.\u5730\u5740="",this.\u7def\u5ea6=0,this.\u7d93\u5ea6=0,this.\u4e3b\u7ba1\u6a5f\u95dc=e.\u4e3b\u7ba1\u6a5f\u95dc,this.\u5730\u5340=e.\u5730\u5340,this.\u71b1\u9ede\u540d\u7a31=e.\u71b1\u9ede\u540d\u7a31,this.\u5730\u5740=e.\u5730\u5740,this.\u7def\u5ea6=+e.\u7def\u5ea6,this.\u7d93\u5ea6=+e.\u7d93\u5ea6},B=window.electronBackendApi,z=function(){var t=localStorage.getItem(y.a.storeFile);return null!=t?Object(O.b)(C,JSON.parse(t)):Object(O.b)(C)}();Object(g.K)({mode:"md",swipeBackEnabled:!1});var V={onSuccess:function(t){},onUpdate:function(t){}},W=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(_.jsx)(v.a,{store:z,children:Object(_.jsx)(Y,Object(p.a)({},this.props))})}}]),n}(s.a.Component),K=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(t){var r;for(Object(d.a)(this,n),(r=e.call(this,t)).registrationNew=void 0,r.originalAppSettingsStr=void 0,r.wakeLock=void 0,r.props.settings.hasAppLog||y.a.disableAppLog(),null===B||void 0===B||B.receive("fromMain",(function(t){switch(t.event){case"version":z.dispatch({type:"TMP_SET_KEY_VAL",key:"mainVersion",val:t.version})}})),null===B||void 0===B||B.send("toMain",{event:"ready"}),r.registrationNew=null,Object(g.J)("android")?window.oncontextmenu=y.a.disableAndroidChromeCallout:Object(g.J)("ios")&&(document.ontouchend=y.a.disableIosSafariCallout.bind(window));document.body.classList.length>0;)document.body.classList.remove(document.body.classList.item(0));document.body.classList.toggle("theme".concat(r.props.settings.theme),!0);var s=x.a.parse(r.props.location.search);return s.settings&&(r.originalAppSettingsStr=localStorage.getItem(y.a.storeFile),s.settings.split(",").forEach((function(t){var e=t.split("=");r.props.dispatch({type:"SET_KEY_VAL",key:e[0],val:+e[1]})}))),y.a.updateCssVars(r.props.settings),r.state={showUpdateAlert:!1,showRestoreAppSettingsToast:null!=s.settings&&null!=r.originalAppSettingsStr||!1,showToast:!1,showGetPositionAlert:!1,toastMessage:""},V.onUpdate=function(t){r.registrationNew=t,r.setState({showUpdateAlert:!0})},V.onSuccess=function(t){},"undefined"!==typeof speechSynthesis&&(speechSynthesis.getVoices(),speechSynthesis.cancel()),navigator.wakeLock&&(r.wakeLockScreen(),document.addEventListener("visibilitychange",Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"visible"===document.visibilityState?r.wakeLockScreen():r.wakeLockScreenRelease();case 1:case"end":return t.stop()}}),t)}))))),indexedDB.open(y.a.tfwcDb).onupgradeneeded=function(t){t.target.result.createObjectStore("store"),console.log("DB store created.")},r.loadTwdData(),r}return Object(h.a)(n,[{key:"restoreAppSettings",value:function(){localStorage.setItem(y.a.storeFile,this.originalAppSettingsStr),this.props.dispatch({type:"LOAD_SETTINGS"})}},{key:"loadTwdData",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z.dispatch({type:"TMP_SET_KEY_VAL",key:"isLoadingData",val:!0}),n=0;case 2:if(!(n<y.a.freeResources.length)){t.next=20;break}return r=y.a.freeResources[n],t.prev=4,t.next=7,y.a.getFileFromIndexedDB(r.dataKey);case 7:e=t.sent,t.next=16;break;case 10:return t.prev=10,t.t0=t.catch(4),t.next=14,y.a.downloadCsvZipData(r.url,(function(t){}));case 14:e=t.sent,y.a.saveFileToIndexedDB(r.dataKey,e);case 16:0===n?z.dispatch({type:"TMP_SET_KEY_VAL",key:"freeChargingItems",val:e.map((function(t){return new U(t)}))}):z.dispatch({type:"TMP_SET_KEY_VAL",key:"freeWifiItems",val:e.map((function(t){return new R(t)}))});case 17:n++,t.next=2;break;case 20:this.props.settings.isInitialized?this.getCurrentPositionAndSortData():this.setState({showGetPositionAlert:!0});case 21:case"end":return t.stop()}}),t,this,[[4,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"wakeLockScreen",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(e=navigator.wakeLock)){t.next=9;break}return t.next=5,e.request("screen");case 5:this.wakeLock=t.sent,console.log("Screen wake lock is requested."),t.next=10;break;case 9:console.error("navigator.wakeLock is undefined.");case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("".concat(t.t0.name,", ").concat(t.t0.message)),console.log((new Error).stack);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"wakeLockScreenRelease",value:function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.wakeLock){t.next=5;break}return t.next=3,this.wakeLock.release();case 3:this.wakeLock=null,console.log("Screen wake lock is released.");case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"routeByQueryString",value:function(){console.log(window.location.search);var t=/route=([^&]*)/.exec(window.location.search),e=/query=([^&]*)/.exec(window.location.search);if(null!==t){var n=decodeURIComponent(t[1]),r="";return null!==e&&(r=decodeURIComponent(e[1])),Object(_.jsx)(b.a,{to:"".concat(y.a.pwaUrl)+n+r})}if(window.location.pathname==="".concat(y.a.pwaUrl,"/")||window.location.pathname==="".concat(y.a.pwaUrl))return Object(_.jsx)(b.a,{to:"".concat(y.a.pwaUrl,"/charging")})}},{key:"getCurrentPositionAndSortData",value:function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.getCurrentPositionAndSortData(z.dispatch,this.props.tmpSettings.freeChargingItems,this.props.tmpSettings.freeWifiItems);case 2:z.dispatch({type:"TMP_SET_KEY_VAL",key:"isLoadingData",val:!1});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,n=this;return Object(_.jsxs)(g.b,{children:[Object(_.jsx)(m.a,{children:Object(_.jsxs)(g.w,{children:[Object(_.jsxs)(g.r,{animated:!1,children:[Object(_.jsx)(b.b,{path:"".concat(y.a.pwaUrl,"/:tab(charging)"),render:function(t){return Object(_.jsx)(I,Object(p.a)({},t))},exact:!0}),Object(_.jsx)(b.b,{path:"".concat(y.a.pwaUrl,"/:tab(wifi)"),render:function(t){return Object(_.jsx)(I,Object(p.a)({},t))},exact:!0}),Object(_.jsx)(b.b,{path:"".concat(y.a.pwaUrl,"/settings"),render:function(t){return Object(_.jsx)(E.a,Object(p.a)({},t))}}),Object(_.jsx)(b.b,{path:"".concat(y.a.pwaUrl,"/"),render:function(){return n.routeByQueryString()},exact:!0})]}),Object(_.jsxs)(g.u,{slot:"bottom",children:[Object(_.jsx)(g.v,{tab:"charging",href:"".concat(y.a.pwaUrl,"/charging"),children:Object(_.jsx)(g.f,{icon:D.b})}),Object(_.jsx)(g.v,{tab:"wifi",href:"".concat(y.a.pwaUrl,"/wifi"),children:Object(_.jsx)(g.f,{icon:D.w})}),Object(_.jsx)(g.v,{tab:"settings",href:"".concat(y.a.pwaUrl,"/settings"),children:Object(_.jsx)(g.f,{icon:D.u})})]})]})}),Object(_.jsx)(g.a,{cssClass:"uiFont",isOpen:this.state.showUpdateAlert,backdropDismiss:!1,onDidPresent:function(t){var e,r,s,a;null===(e=n.registrationNew)||void 0===e||null===(r=e.installing)||void 0===r||r.postMessage({type:"SKIP_WAITING"}),null===(s=n.registrationNew)||void 0===s||null===(a=s.waiting)||void 0===a||a.postMessage({type:"SKIP_WAITING"})},header:"App \u5df2\u66f4\u65b0\uff0c\u8acb\u91cd\u555f!",buttons:[{text:"\u95dc\u9589",cssClass:"primary uiFont",handler:function(t){n.setState({showUpdateAlert:!1})}}]}),Object(_.jsx)(P,Object(p.a)({},Object(p.a)({text:null===(t=this.props.shareTextModal)||void 0===t?void 0:t.text,showModal:(null===(e=this.props.shareTextModal)||void 0===e?void 0:e.show)||!1,finish:function(){z.dispatch({type:"TMP_SET_KEY_VAL",key:"shareTextModal",val:{show:!1}})}},this.props))),Object(_.jsx)(g.a,{cssClass:"uiFont",isOpen:this.state.showGetPositionAlert,backdropDismiss:!1,header:"\u9700\u8981\u60a8\u7684\u4f4d\u7f6e\u4f5c\u5c0e\u822a\u81f3\u514d\u8cbb\u5145\u96fb\u7ad9\u6216 WiFi \u71b1\u9ede\u3002\u6309\u4e0b\u95dc\u9589\u5f8c\uff0c\u6703\u8df3\u51fa\u4f4d\u7f6e\u6b0a\u9650\u5b58\u53d6\uff0c\u8acb\u5141\u8a31\u6b64 app \u5b58\u53d6\u60a8\u7684\u4f4d\u7f6e\u3002",buttons:[{text:"\u95dc\u9589",cssClass:"primary uiFont",handler:function(t){n.setState({showGetPositionAlert:!1}),z.dispatch({type:"SET_KEY_VAL",key:"isInitialized",val:!0}),n.getCurrentPositionAndSortData()}}]}),Object(_.jsx)(g.y,{cssClass:"uiFont",isOpen:this.state.showRestoreAppSettingsToast,onDidDismiss:function(){return n.setState({showRestoreAppSettingsToast:!1})},message:"\u5df2\u5957\u7528app\u9023\u7d50\u4e2d\u7684\u8a2d\u5b9a\uff0c\u662f\u5426\u9084\u539f\u8a2d\u5b9a\uff1f",buttons:[{text:"\u53d6\u6d88",role:"cancel",handler:function(){return n.setState({showRestoreAppSettingsToast:!1})}},{text:"\u9084\u539f",handler:function(){return n.restoreAppSettings()}}]}),Object(_.jsx)(g.y,{cssClass:"uiFont",isOpen:this.state.showToast,onDidDismiss:function(){return n.setState({showToast:!1})},message:this.state.toastMessage,duration:2e3})]})}}]),n}(s.a.Component),Y=Object(v.b)((function(t){return{shareTextModal:t.tmpSettings.shareTextModal,settings:t.settings,tmpSettings:t.tmpSettings}}))(K),J=Object(b.f)(W),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){console.log("installingWorker stage changed: ".concat(n.state)),"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}y.a.enableAppLog(),o.a.render(Object(_.jsx)(i.a,{children:Object(_.jsx)(J,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/tfwc",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tfwc","/service-worker.js");q?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):G(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):G(e,t)}))}}({onSuccess:function(t){console.log("Precache app loaded!"),V.onSuccess(t)},onUpdate:function(t){console.log("Found app updated!"),V.onUpdate(t)}})},5:function(t,e,n){"use strict";var r=n(3),s=n.n(r),a=n(7),o=n(2),i=n(84),c=n.n(i),u=n(221),l=n.n(u),p=n(222),d=n.n(p),h=n(223),f=n(1),j="/tfwc",b="tfwcDb",g="";function m(){return(m=Object(a.a)(s.a.mark((function t(e,n){var r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,n);case 2:return r=t.sent,a=new l.a(r),o=a.getEntries()[0].getData().toString("utf8"),t.abrupt("return",d()(o,{columns:!0,bom:65279===o.charCodeAt(0)}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,e){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var s=new h.DownloaderHelper(e,".",{}),a=!0;s.on("progress",(function(t){a&&(n(t.progress),a=!1,setTimeout((function(){a=!0}),100))})),s.on("end",(function(e){s.removeAllListeners(),t(c.a.readFileSync(e.filePath))})),s.start()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=Object(a.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=indexedDB.open(b),t.abrupt("return",new Promise((function(t,r){n.onsuccess=function(){var o=Object(a.a)(s.a.mark((function o(i){var c,u,l;return s.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:c=n.result;try{u=c.transaction(["store"],"readwrite"),(l=u.objectStore("store").get(e)).onsuccess=function(){var n=Object(a.a)(s.a.mark((function n(a){var o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=l.result){n.next=5;break}return console.error("".concat(e," loading failed!")),console.error((new Error).stack),n.abrupt("return",r());case 5:return n.abrupt("return",t(o));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}catch(i){console.error(i)}case 2:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=Object(a.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=indexedDB.open(b),t.abrupt("return",new Promise((function(t,o){r.onsuccess=function(){var i=Object(a.a)(s.a.mark((function a(i){var c,u,l;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c=r.result,u=c.transaction(["store"],"readwrite"),(l=u.objectStore("store").put(n,e)).onsuccess=function(e){return t()},l.onerror=function(t){return o()};case 5:case"end":return s.stop()}}),a)})));return function(t){return i.apply(this,arguments)}}()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=Object(a.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=indexedDB.open(b),t.abrupt("return",new Promise((function(t,r){try{n.onsuccess=function(s){var a=n.result.transaction(["store"],"readwrite");try{var o=a.objectStore("store").delete(e);o.onsuccess=function(e){return t()},o.onerror=function(t){return r()}}catch(i){console.error(i)}}}catch(s){r(s)}})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=indexedDB.open(b),t.abrupt("return",new Promise((function(t,n){e.onsuccess=function(){var r=Object(a.a)(s.a.mark((function r(a){var o,i,c;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=e.result,i=o.transaction(["store"],"readwrite"),(c=i.objectStore("store").clear()).onsuccess=function(e){return t()},c.onerror=function(t){return n()};case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=Object(a.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.clear(),t.next=3,k();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return D.apply(this,arguments)}function D(){return(D=Object(a.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t(e)}),(function(t){e("".concat(t.code,": ").concat(t.message))})):e("No geolocation object!")})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e){return Math.sqrt(Math.pow(t.\u7d93\u5ea6-e.longitude,2)+Math.pow(t.\u7def\u5ea6-e.latitude,2))}function T(){return(T=Object(a.a)(s.a.mark((function t(e,n,r){var a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C();case 3:a=t.sent,o=a.coords,e({type:"TMP_SET_KEY_VAL",key:"currPosition",val:a}),e({type:"TMP_SET_KEY_VAL",key:"freeChargingItems",val:n.sort((function(t,e){return E(t,o)-E(e,o)}))}),e({type:"TMP_SET_KEY_VAL",key:"freeWifiItems",val:r.sort((function(t,e){return E(t,o)-E(e,o)}))}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}var _=console.log.bind(console),F=console.error.bind(console);function L(){return Object(o.J)("ios")&&"MacIntel"===navigator.platform}var I={pwaUrl:j,bugReportApiUrl:"https://vh6ud1o56g.execute-api.ap-northeast-1.amazonaws.com/bugReportMailer",storeFile:"tfwcSettings.json",downloadCsvZipData:function(t,e){return m.apply(this,arguments)},getCurrentPosition:C,getCurrentPositionAndSortData:function(t,e,n){return T.apply(this,arguments)},getLog:function(){return g},enableAppLog:function(){console.log=function(){g+="----- Info ----\n",g+=Array.from(arguments)+"\n",_.apply(console,arguments)},console.error=function(){g+="----- Error ----\n",g+=Array.from(arguments)+"\n",F.apply(console,arguments)}},disableAppLog:function(){g="",console.log=_,console.error=F},tfwcDb:b,freeResources:[{item:"\u96e2\u7dda\u514d\u8cbb\u5145\u96fb\u8cc7\u6599",dataKey:"freeCharging",url:"https://d23fxcqevt3np7.cloudfront.net/charge_station_list.zip"},{item:"\u96e2\u7dda\u514d\u8cbb WiFi \u8cc7\u6599",dataKey:"freeWifi",url:"https://d23fxcqevt3np7.cloudfront.net/hotspotlist.zip"}],appSettings:{theme:"\u4f48\u666f\u4e3b\u984c",uiFontSize:"UI \u5b57\u578b\u5927\u5c0f"},fetchErrorContent:Object(f.jsx)("div",{className:"contentCenter",children:Object(f.jsx)(o.j,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:"\u9023\u7dda\u5931\u6557!"}),Object(f.jsxs)("div",{style:{fontSize:"var(--ui-font-size)",paddingTop:24},children:["\u5982\u679c\u554f\u984c\u6301\u7e8c\u767c\u751f\uff0c\u8acb\u57f7\u884c",Object(f.jsx)("a",{href:"/".concat(j,"/settings"),target:"_self",children:"\u8a2d\u5b9a\u9801"}),"\u7684 app \u7570\u5e38\u56de\u5831\u529f\u80fd\u3002"]})]})})}),updateApp:function(){return new Promise(function(){var t=Object(a.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.serviceWorker.getRegistrations().then(function(){var t=Object(a.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map((function(t){return t.update().then((function(t){return null!==t.installing||null!==t.waiting}))})));case 2:r=t.sent,e(r.reduce((function(t,e){return t||e}),!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},updateCssVars:function(t){document.documentElement.style.cssText="--ui-font-size: ".concat(t.uiFontSize,"px;")},isMacCatalyst:L,isTouchDevice:function(){return Object(o.J)("ios")&&!L()||Object(o.J)("android")},isStoreApps:function(){return Object(o.J)("pwa")||Object(o.J)("electron")},getFileFromIndexedDB:function(t){return x.apply(this,arguments)},saveFileToIndexedDB:function(t,e){return O.apply(this,arguments)},removeFileFromIndexedDB:function(t){return y.apply(this,arguments)},clearAppData:function(){return A.apply(this,arguments)},removeElementsByClassName:function(t,e){for(var n=t.getElementsByClassName(e);n.length>0;){var r;null===(r=n[0].parentNode)||void 0===r||r.removeChild(n[0])}},disableAndroidChromeCallout:function(t){return t.preventDefault(),t.stopPropagation(),!1},disableIosSafariCallout:function(t){var e=this.getSelection();if(((null===e||void 0===e?void 0:e.rangeCount)||0)>0){var n=null===e||void 0===e?void 0:e.getRangeAt(0);null===e||void 0===e||e.removeAllRanges(),setTimeout((function(){null===e||void 0===e||e.addRange(n)}),50)}},copyToClipboard:function(t){try{navigator.clipboard&&navigator.clipboard.writeText(t)}catch(e){console.error(e)}}};e.a=I}},[[449,3,4]]]);
//# sourceMappingURL=main.b25de15a.chunk.js.map